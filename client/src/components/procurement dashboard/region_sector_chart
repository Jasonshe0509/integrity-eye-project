import React, { useEffect, useState } from 'react';
import { ComposableMap, Geographies, Geography } from 'react-simple-maps';

const RegionSectorMalaysiaMapChart = () => {
    const [geographyData, setGeographyData] = useState(null);

    useEffect(() => {
        // Fetch the TopoJSON data from the URL
        fetch('https://code.highcharts.com/mapdata/countries/my/my-all.topo.json')
            .then(response => response.json())
            .then(data => setGeographyData(data))
            .catch(error => console.error('Error fetching the map data:', error));
    }, []);

    return (
        <div className="bg-white p-6 rounded shadow-md mb-6 h-full">
            <h2 className="text-lg font-semibold">Regions & Sectors</h2>
            <div className="h-64">
                {geographyData ? (
                    <ComposableMap projection="geoAzimuthalEqualArea" projectionConfig={{ scale: 1600 }}>
                        <Geographies geography={geographyData}>
                            {({ geographies }) =>
                                geographies.map((geo) => (
                                    <Geography
                                        key={geo.rsmKey}
                                        geography={geo}
                                        style={{
                                            default: {
                                                fill: "#D6D6DA",
                                                outline: "none"
                                            },
                                            hover: {
                                                fill: "#F53",
                                                outline: "none"
                                            },
                                            pressed: {
                                                fill: "#E42",
                                                outline: "none"
                                            }
                                        }}
                                    />
                                ))
                            }
                        </Geographies>
                    </ComposableMap>
                ) : (
                    <p>Loading map...</p>
                )}
            </div>
        </div>
    );
};

export default RegionSectorMalaysiaMapChart;
